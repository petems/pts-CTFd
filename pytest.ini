[tool:pytest]
# Test discovery patterns
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Performance optimizations and coverage
addopts = 
    --strict-markers
    --strict-config
    --disable-warnings
    --tb=short
    -n auto
    --dist=loadscope
    --maxfail=10
    --durations=10
    --cov=CTFd
    --cov-report=xml
    --cov-report=term-missing
    --cov-context=test

# Markers for test categorization
markers =
    slow: marks tests as slow running (>5 seconds)
    db: marks tests requiring database operations
    api: marks API endpoint tests  
    admin: marks admin interface tests
    auth: marks authentication tests
    integration: marks integration tests
    unit: marks unit tests

# Minimum version
minversion = 6.0

# Filter warnings for cleaner output
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:flask.sessions
    ignore::sqlalchemy.exc.RemovedIn20Warning

# Test timeout (prevent hanging tests)
timeout = 300